- type: replace
  path: /resource_types/-
  value:
    name: pivnet
    type: docker-image
    source:
      repository: pivotalcf/pivnet-resource
      tag: latest-final

- type: replace
  path: /resources/-
  value:
    name: windows-stemcell

- type: replace
  path: /resources/-
  value:
    name: kubo-release-windows
    type: gcs
    source:
      json_key: ((gcs-json-key))
      bucket: kubo-pipeline-store
      regexp: gcp-windows-builds/kubo-release-(.*).tgz
      # regexp: dev-windows-builds/kubo-(\d+\.\d+\.\d+(-dev\.\d+)*).*\.tgz

## May only be necessary for vsphere environments. Should confirm with windows
## team when they provide support for other iaas's. 
# - type: replace
#   path: /jobs/name=deploy-k8s/plan/put=cfcr-deployment/params/ops_files/-
#   value: git-kubo-deployment/manifests/ops-files/use-hostgw.yml

## This ops-file must come before all of the other windows ops-files
- type: replace
  path: /jobs/name=deploy-k8s/plan/put=cfcr-deployment/params/ops_files/-
  value: git-kubo-deployment/manifests/ops-files/windows/add-worker.yml


- type: replace
  path: /jobs/name=deploy-k8s/plan/put=cfcr-deployment/params/ops_files/-
  value: git-kubo-deployment/manifests/ops-files/windows/version.yml

- type: replace
  path: /jobs/name=claim-lock/plan/-
  value:
    get: kubo-release-windows

- type: replace
  path: /jobs/name=deploy-k8s/plan/0/aggregate/-
  value:
    get: kubo-release-windows
    passed: ['claim-lock']

- type: replace
  path: /jobs/name=deploy-k8s/plan/0/aggregate/-
  value:
    get: windows-stemcell

- type: replace
  path: /jobs/name=deploy-k8s/plan/task=upload-stemcell/input_mapping/alternate-stemcell?
  value:
    windows-stemcell

- type: replace
  path: /jobs/name=deploy-k8s/plan/put=cfcr-deployment/params/ops_files/-
  value: git-kubo-deployment/manifests/ops-files/windows/version.yml

- type: replace
  path: /jobs/name=claim-lock/plan/-
  value:
    get: kubo-release-windows

- type: replace
  path: /jobs/name=deploy-k8s/plan/0/aggregate/-
  value:
    get: kubo-release-windows
    passed: ['claim-lock']

- type: replace
  path: /jobs/name=deploy-k8s/plan/0/aggregate/-
  value:
    get: windows-stemcell

- type: replace
  path: /jobs/name=deploy-k8s/plan/task=upload-stemcell/input_mapping/alternate-stemcell?
  value:
    windows-stemcell

- type: replace
  path: /jobs/name=deploy-k8s/plan/put=cfcr-deployment/params/ops_files/-
  value: git-kubo-deployment/manifests/ops-files/windows/scale-to-one-az.yml

- type: replace
  path: /jobs/name=deploy-k8s/plan/put=cfcr-deployment/params/ops_files/-
  value: git-kubo-deployment/manifests/ops-files/windows/enable-rdp.yml

- type: replace
  path: /jobs/name=deploy-k8s/plan/put=cfcr-deployment/params/ops_files/-
  value: git-kubo-deployment/manifests/ops-files/windows/vm-types.yml

- type: replace
  path: /jobs/name=deploy-k8s/plan/put=cfcr-deployment/params/ops_files/-
  value: git-kubo-deployment/manifests/ops-files/windows/use-overlay.yml

- type: replace
  path: /jobs/name=deploy-k8s/plan/put=cfcr-deployment/params/ops_files/-
  value: git-kubo-deployment/manifests/ops-files/windows/use-vm-extensions.yml

- type: replace
  path: /jobs/name=deploy-k8s/plan/put=cfcr-deployment/params/ops_files/-
  value: git-kubo-deployment/manifests/ops-files/iaas/((iaas))/windows/cloud-provider.yml

# - type: replace
#   path: /jobs/name=deploy-k8s/plan/put=cfcr-deployment/params/ops_files/-
#   value: git-kubo-deployment/manifests/ops-files/iaas/gcp/windows/add-service-key-worker.yml

# - type: replace
#   path: /jobs/name=deploy-k8s/plan/put=cfcr-deployment/params/ops_files/-
#   value: git-kubo-deployment/manifests/ops-files/iaas/gcp/windows/ephemeral-disk.yml

# - type: replace
#   path: /jobs/name=deploy-k8s/plan/put=cfcr-deployment/params/ops_files/-
#   value: git-kubo-deployment/manifests/ops-files/windows/increase-disk.yml

- type: replace
  path: /jobs/name=deploy-k8s/plan/put=cfcr-deployment/params/vars/windows_worker_vm_type?
  value: small-highmem

- type: replace
  path: /jobs/name=deploy-k8s/plan/put=cfcr-deployment/params/vars/windows-rdp-password?
  value: ((windows-rdp-password))

- type: replace
  path: /jobs/name=deploy-k8s/plan/put=cfcr-deployment/params/vars/kubo-windows-version?
  value: latest

- type: replace
  path: /jobs/name=deploy-k8s/plan/put=cfcr-deployment/params/releases/-
  value: kubo-release-windows/*.tgz
